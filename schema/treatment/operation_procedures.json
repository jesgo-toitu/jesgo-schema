{
  "$schema": "../jesgo.json",
  "$id": "/schema/treatment/operation_procedures",
  "jesgo:version": "1.3",
  "jesgo:valid": [ "2026-01-01" ],
  "jesgo:unique": true,
  "type": "object",
  "title": "実施手術",
  "description": "術式選択において子宮摘出・子宮頸部摘出術式の項目選択時には、“子宮摘出・子宮頸部摘出の方法“として術式選択を行い、リンパ節郭清等については別途個別に実施した術式を登録して下さい。",
  "properties": {
    "実施手術": {
      "type": "array",
      "description": "主たる術式を最初の行に配置してください.",
      "items": {
        "$ref": "#/$defs/procedure"
      }
    },
    "リンパ節郭清アプローチ": {},
    "腹腔鏡下手術情報": {},
    "ロボット支援下手術情報": {}
  },
  "allOf": [
    {
      "if": {
        "properties": {
          "実施手術": {
            "contains": {
              "properties": {
                "術式": {
                  "pattern": "(ロボット支援下|腹腔鏡下).*リンパ節"
                }
              }
            }
          }
        }
      },
      "then": {
        "properties": {
          "リンパ節郭清アプローチ": {
            "type": "string",
            "enum": [
              "経腹膜アプローチ",
              "後腹膜アプローチ"
            ],
            "description": "ロボット支援下手術または腹腔鏡手術でリンパ節郭清を行った場合、リンパ節郭清のアプローチ方法を選択してください。"
          }
        },
        "required": [ "リンパ節郭清アプローチ" ]
      }
    },
    {
      "if": {
        "properties": {
          "実施手術": {
            "contains": {
              "properties": {
                "術式": {
                  "pattern": "腹腔鏡下"
                }
              }
            }
          }
        }
      },
      "then": {
        "properties": {
          "腹腔鏡下手術情報": {
            "$ref": "#/$defs/laparo_information"
          }
        },
        "required": [ "腹腔鏡下手術情報" ]
      }
    },
    {
      "if": {
        "properties": {
          "実施手術": {
            "contains": {
              "properties": {
                "術式": {
                  "pattern": "ロボット支援下"
                }
              }
            }
          }
        }
      },
      "then": {
        "properties": {
          "ロボット支援下手術情報": {
            "$ref": "#/$defs/robot_information"
          }
        },
        "required": [ "ロボット支援下手術情報" ]
      }
    }
  ],
  "$defs": {
    "procedure": {
      "$id": "#procedure",
      "type": "object",
      "jesgo:ui:subschemastyle": "inline",
      "properties": {
        "術式": {
          "type": "string",
          "oneOf": [
            {
              "title": "開腹手術",
              "oneOf": [
                {
                  "title": "子宮摘出・子宮頸部摘出術式",
                  "enum": [
                    "腟上部切断術",
                    "単純子宮全摘出術（筋膜内）",
                    "単純子宮全摘出術（筋膜外）",
                    "準広汎子宮全摘出術",
                    "準広汎子宮頸部摘出術",
                    "広汎子宮全摘出術",
                    "広汎子宮全摘出術（神経温存術式）",
                    "広汎子宮頸部摘出術"
                  ]
                },
                {
                  "title": "卵巣摘出",
                  "enum": [
                    "右側付属器摘出術（嚢腫摘出術含む）",
                    "左側付属器摘出術（嚢腫摘出術含む）",
                    "両側付属器摘出術",
                    "卵巣移動（片側）",
                    "卵巣移動（両側）"
                  ]
                },
                {
                  "title": "骨盤リンパ節摘出",
                  "enum": [
                    "骨盤リンパ節選択的郭清（生検）",
                    "骨盤リンパ節系統的郭清",
                    "骨盤リンパ節センチネルリンパ節生検"
                  ]
                },
                {
                  "title": "傍大動脈リンパ節摘出",
                  "enum": [
                    "傍大動脈リンパ節選択的郭清（生検）",
                    "傍大動脈リンパ節系統的郭清",
                    "傍大動脈リンパ節センチネルリンパ節生検"
                  ]
                },
                {
                  "title": "大網摘出",
                  "enum": [
                    "大網生検",
                    "大網部分切除",
                    "大網亜全摘"
                  ]
                },
                {
                  "title": "合併切除",
                  "enum": [
                    "腹膜播種切除",
                    "その他の臓器の切除"
                  ]
                },
                {
                  "const": "その他の開腹手術"
                }
              ]
            },
            {
              "title": "腟式手術",
              "enum": [
                "子宮頸部円錐切除術（本術式のみで治療終了した場合）",
                "腟式単純子宮全摘術（筋膜内）",
                "腟式準広汎子宮全摘術（筋膜外）",
                "腟式広汎子宮全摘出術",
                "腟式広汎子宮頸部摘出術",
                "その他の腟式手術"
              ]
            },
            {
              "title": "腹腔鏡手術",
              "oneOf": [
                {
                  "title": "子宮摘出術式",
                  "enum": [
                    "腹腔鏡下単純子宮全摘出術（筋膜内）",
                    "腹腔鏡下単純子宮全摘出術（筋膜外）",
                    "腹腔鏡下準広汎子宮全摘出術",
                    "腹腔鏡下広汎子宮全摘出術",
                    "腹腔鏡下子宮頸部摘出術",
                    "婦人科以外の悪性疾患による腹腔鏡下子宮全摘出術"
                  ]
                },
                {
                  "title": "卵巣摘出",
                  "enum": [
                    "腹腔鏡下右付属器摘出術",
                    "腹腔鏡下左付属器摘出術",
                    "腹腔鏡下両付属器摘出術",
                    "腹腔鏡下病変生検・審査腹腔鏡",
                    "治療のために開腹手術へ移行（合併症を除く）",
                    "リスク低減のための腹腔鏡下内性器摘出術",
                    "妊孕性温存のための腹腔鏡下付属器摘出術",
                    "他の悪性疾患の腹腔鏡下予防的切除術",
                    "転移性卵巣癌による腹腔鏡下付属器摘出術"
                  ]
                },
                {
                  "title": "リンパ節生検・郭清",
                  "enum": [
                    "腹腔鏡下センチネルリンパ節生検",
                    "腹腔鏡下骨盤内リンパ節郭清",
                    "腹腔鏡下傍大動脈リンパ節郭清"
                  ]
                },
                {
                  "title": "大網摘出",
                  "enum": [
                    "腹腔鏡下に大網生検",
                    "腹腔鏡下に大網部分切除",
                    "腹腔鏡下に大網亜全摘"
                  ]
                },
                {
                  "title": "その他",
                  "enum": [
                    "腹腔鏡下に再発病巣の摘出術",
                    "腹腔鏡下に他の診療科との合同手術",
                    "腹腔鏡下に術後合併症の修復術"
                  ]
                },
                {
                  "const": "その他の腹腔鏡手術"
                }
              ]
            },
            {
              "title": "ロボット支援下手術",
              "oneOf": [
                {
                  "title": "子宮摘出術式",
                  "enum": [
                    "ロボット支援下単純子宮全摘出術",
                    "ロボット支援下準広汎子宮全摘出術",
                    "ロボット支援下広汎子宮全摘出術",
                    "ロボット支援下子宮頸部摘出術",
                    "婦人科以外の悪性疾患によるロボット支援下子宮全摘出術"
                  ]
                },
                {
                  "title": "卵巣摘出",
                  "enum": [
                    "ロボット支援下右付属器摘出術",
                    "ロボット支援下左付属器摘出術",
                    "ロボット支援下両付属器摘出術",
                    "ロボット支援下病変生検・審査腹腔鏡",
                    "治療のために開腹手術へ移行（合併症を除く）",
                    "リスク低減のためのロボット支援下内性器摘出術",
                    "妊孕性温存のためのロボット支援下付属器摘出術",
                    "他の悪性疾患のロボット支援下予防的切除術",
                    "転移性卵巣癌によるロボット支援下付属器摘出術"
                  ]
                },
                {
                  "title": "リンパ節生検・郭清",
                  "enum": [
                    "ロボット支援下センチネルリンパ節生検",
                    "ロボット支援下骨盤内リンパ節郭清",
                    "ロボット支援下傍大動脈リンパ節郭清"
                  ]
                },
                {
                  "title": "その他",
                  "enum": [
                    "治療のために開腹手術へ移行（合併症を除く）",
                    "治療のために腹腔鏡手術へ移行（合併症を除く）",
                    "ロボット支援下に術後合併症の修復術"
                  ]
                },
                {
                  "const": "その他のロボット支援下手術"
                }
              ]
            }
          ]
        },
        "自由入力": {
          "type": "string",
          "jesgo:ui:visibleWhen": {
            "properties": {
              "術式": {
                "enum": [
                  "その他の開腹手術",
                  "その他の腟式手術",
                  "その他の腹腔鏡手術",
                  "その他のロボット支援下手術"
                ]
              }
            }
          }
        }
      }
    },
    "laparo_information": {
      "$id": "#laparo_information",
      "type": "object",
      "title": "腹腔鏡下手術情報",
      "properties": {
        "腹腔鏡アプローチ": {
          "title": "腹腔鏡下手術アプローチ法",
          "type": "string",
          "enum": [
            "通常ポート配置",
            "単孔/RPS",
            "VNOTES",
            "つり上げ法"
          ],
          "description": "手術のアプローチとして中心となったものを選択してください。",
          "jesgo:required": [ "JSGOE" ]
        }
      }
    },
    "robot_information": {
      "$id": "#robot_information",
      "type": "object",
      "title": "ロボット支援下手術情報",
      "properties": {
        "ロボット使用器材": {
          "title": "ロボット支援下手術使用器材",
          "type": "string",
          "enum": [
            "DaVinci Si,X,Xi,5",
            "DaVinci SP",
            "Hugo",
            "hinotori",
            "Saroa"
          ],
          "jesgo:required": [ "JSGOE" ]
        },
        "ロボットセッティング": {
          "title": "ロボット支援下手術セッティング",
          "type": "array",
          "jesgo:ui:listtype": "buttons",
          "items": {
            "type": "string",
            "enum": [
              "ダブルバイポーラ"
            ]
          }
        }
      }
    }
  }
}
